
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A standardized archive and client of neuroimaging templates">
      
      
        <meta name="author" content="The NiPreps developers">
      
      
        <link rel="canonical" href="https://www.templateflow.org/usage/client/">
      
      
        <link rel="prev" href="../archive/">
      
      
        <link rel="next" href="../citing/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Python Client - TemplateFlow</title>
      
    
    
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" href="../../css/bstreeview.min.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.eebd395e.min.css">
      
      

    

    
    
	<script
	  src="https://code.jquery.com/jquery-3.4.1.min.js"
	  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	  crossorigin="anonymous"></script>
<!-- 	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
<!-- 	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> -->
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
	<script src="https://kit.fontawesome.com/7e31cfd31d.js" crossorigin="anonymous"></script>
    <script src="../../js/bstreeview.min.js"></script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#about-the-python-client" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="TemplateFlow" class="md-header__button md-logo" aria-label="TemplateFlow" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TemplateFlow
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Python Client
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/templateflow/templateflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    templateflow/templateflow
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="TemplateFlow" class="md-nav__button md-logo" aria-label="TemplateFlow" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    TemplateFlow
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/templateflow/templateflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    templateflow/templateflow
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../browse/" class="md-nav__link">
        Browser
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../archive/" class="md-nav__link">
        TemplateFlow Archive
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Python Client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Python Client
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-the-python-client" class="md-nav__link">
    About the Python client
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-loading-of-templates" class="md-nav__link">
    Lazy loading of templates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-python-client-in-a-nutshell" class="md-nav__link">
    The Python client in a nutshell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-you-start" class="md-nav__link">
    Before you start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-of-operation" class="md-nav__link">
    Mode of operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-python-package-with-pip" class="md-nav__link">
    Installing the Python package with Pip
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checking-the-installation" class="md-nav__link">
    Checking the installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    FAQ
  </a>
  
    <nav class="md-nav" aria-label="FAQ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-study-population-specific-templates" class="md-nav__link">
    Custom (study / population specific) templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-am-i-getting-zero-sized-nifti-files" class="md-nav__link">
    Why am I getting zero-sized NIfTI files?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-for-developers" class="md-nav__link">
    Documentation for developers
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../citing/" class="md-nav__link">
        Cite TemplateFlow
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/guidelines/" class="md-nav__link">
        Guidelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/naming/" class="md-nav__link">
        Naming Conventions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/submission/" class="md-nav__link">
        Submitting a new template
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-the-python-client" class="md-nav__link">
    About the Python client
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-loading-of-templates" class="md-nav__link">
    Lazy loading of templates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-python-client-in-a-nutshell" class="md-nav__link">
    The Python client in a nutshell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-you-start" class="md-nav__link">
    Before you start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-of-operation" class="md-nav__link">
    Mode of operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-python-package-with-pip" class="md-nav__link">
    Installing the Python package with Pip
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checking-the-installation" class="md-nav__link">
    Checking the installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    FAQ
  </a>
  
    <nav class="md-nav" aria-label="FAQ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-study-population-specific-templates" class="md-nav__link">
    Custom (study / population specific) templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-am-i-getting-zero-sized-nifti-files" class="md-nav__link">
    Why am I getting zero-sized NIfTI files?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-for-developers" class="md-nav__link">
    Documentation for developers
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Python Client</h1>

<h2 id="about-the-python-client">About the Python client<a class="headerlink" href="#about-the-python-client" title="Permanent link">&para;</a></h2>
<p>The Python client provides an easy to use tool to integrate the <em>TemplateFlow Archive</em> into Python code and notebooks.
The Python client uses PyBIDS to index and query the <em>TemplateFlow Archive</em>.
A practical example of how this operates follows:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">templateflow</span> <span class="kn">import</span> <span class="n">api</span> <span class="k">as</span> <span class="n">tflow</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MNI152NLin6Asym&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="o">...</span>           <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;T1w&#39;</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;nii.gz&#39;</span><span class="p">)</span>
<span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;/templateflow_home/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_T1w.nii.gz&#39;</span><span class="p">)</span>
</code></pre></div>

<h2 id="lazy-loading-of-templates">Lazy loading of templates<a class="headerlink" href="#lazy-loading-of-templates" title="Permanent link">&para;</a></h2>
<p>The client only pulls the template data the first time those are requested.
The first time we run the above commands in python, we will see how the client connects
to the archive and pulls down a copy.
The second time the command is executed, the local copy is found and retrieved without
further Internet access.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>In computing environments isolated from the Internet (a common case on academic
high-performance computing), please fetch all the templates you will need from
the node where you can access the Internet during installation.</p>
</div>
<div class="admonition tip">
<p class="admonition-title"><em>TemplateFlow</em> and Singularity Containers</p>
<p>Singularity containers are a special case of isolated environment.
These containers are usually executed without privileged permissions and on those
settings, the default home folder (see below) will be non-writable.
Please check <a href="https://fmriprep.readthedocs.io/en/stable/singularity.html#templateflow-and-singularity" title="Singularity"><em>fMRIPrep</em>'s documentation</a> for further information
on how to use <em>TemplateFlow</em> within Singularity.</p>
</div>
<h2 id="the-python-client-in-a-nutshell">The Python client in a nutshell<a class="headerlink" href="#the-python-client-in-a-nutshell" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th style="text-align: center;"><img alt="Client" src="../../assets/templateflow_fig-client.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>Example usage of the Python client</strong>. After importing the API, the user submits a query for the T1-weighted FSL version of the MNI template at 1 mm resolution. The client first filters through the archive, identifies any files that match the query, and finds their counterparts in cloud storage. It then downloads the requested files and returns their paths in the local <em>TemplateFlow</em> installation directory. Future queries for the same resource can be completed without any re-downloading.</td>
</tr>
</tbody>
</table>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<h3 id="before-you-start">Before you start<a class="headerlink" href="#before-you-start" title="Permanent link">&para;</a></h3>
<p>By default, the local cache of the archive is stored under <code>$HOME/.cache/templateflow</code>.
If you need to change the location of the local copy, make sure you set the <code>TEMPLATEFLOW_HOME</code>
environment variable:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">TEMPLATEFLOW_HOME</span><span class="o">=</span>/var/local/templateflow
</code></pre></div>

<p>Please make sure you have read and write permissions on the folder you designate as <em>home</em>.</p>
<h3 id="mode-of-operation">Mode of operation<a class="headerlink" href="#mode-of-operation" title="Permanent link">&para;</a></h3>
<p>The client can operate directly with <a href="https://datalad.org" title="DataLad">DataLad</a> or just download templates from a
mirror of the archive stored on a public S3 bucket.
Using the latter option rules out administering the local copy of the archive with DataLad.
By default, the environment variable <code>TEMPLATEFLOW_USE_DATALAD</code> will be set to <code>off</code>.
In other words, the default mode of operation is direct download.
To enable the DataLad-base operation, make sure you set the environment variable:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">TEMPLATEFLOW_USE_DATALAD</span><span class="o">=</span>on
</code></pre></div>

<p>Valid values for this environment variable to enable DataLad are <code>1</code>, <code>y</code>, <code>on</code>, <code>yes</code>, <code>true</code>.</p>
<h3 id="installing-the-python-package-with-pip">Installing the Python package with Pip<a class="headerlink" href="#installing-the-python-package-with-pip" title="Permanent link">&para;</a></h3>
<p>The TemplateFlow Client only works with Python 3.6 or greater.</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>templateflow
</code></pre></div>

<h3 id="checking-the-installation">Checking the installation<a class="headerlink" href="#checking-the-installation" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import templateflow as tf; print(tf.__version__)&quot;</span>
<span class="m">0</span>.6.0
</code></pre></div>

<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<h3 id="custom-study-population-specific-templates">Custom (study / population specific) templates<a class="headerlink" href="#custom-study-population-specific-templates" title="Permanent link">&para;</a></h3>
<p>As <a href="https://github.com/poldracklab/smriprep/issues/8">Chris noted in this fundamental thread</a>:</p>
<blockquote>
<p>Custom (volume and surface) templates derived from a particular dataset have been shown to improve overlap between participants. It is also the recommended way to deal with smaller head sizes in developmental populations. Both ANTs and FreeSurfer support building such templates.</p>
</blockquote>
<p>It is possible to integrate custom templates into TemplateFlow in two steps:</p>
<ol>
<li>Organize your <a href="../archive/#naming-conventions">template accordingly</a>.</li>
<li>Copy the custom template tree into the <code>$TEMPLATEFLOW_HOME</code> directory.</li>
</ol>
<p>Please make sure you include all the necessary files and resolutions that then will be utilized by downstream software.</p>
<h3 id="why-am-i-getting-zero-sized-nifti-files">Why am I getting zero-sized NIfTI files?<a class="headerlink" href="#why-am-i-getting-zero-sized-nifti-files" title="Permanent link">&para;</a></h3>
<p>(From: <a href="https://github.com/templateflow/tpl-MNI152NLin2009cAsym/issues/7" title="Zerosize Issue">templateflow/tpl-MNI152NLin2009cAsym#7</a>)</p>
<p>If you just installed <em>TemplateFlow</em> without explicitly setting the DataLad mode of operation
on, then it will be using the S3 backend.
To allow lazy loading, S3-operated client installations deploy an <em>archive skeleton</em> to the
<em>TemplateFlow Home</em> directory.
This skeleton contains zero-size files, that are replaced by the appropriate content pulled down
from S3 on the first utilization.</p>
<p>So, if you just installed the client, and want to open a particular template image with the
Mango visualization tool, instead of just doing:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>mango<span class="w"> </span><span class="si">${</span><span class="nv">TEMPLATEFLOW_HOME</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.cache/templateflow</span><span class="si">}</span>/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_T1w.nii.gz
</code></pre></div>

<p>Please make sure you use the client to access the image, for instance:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>mango<span class="w"> </span><span class="k">$(</span><span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from templateflow.api import get; \</span>
<span class="s2">          print(str(get(&#39;MNI152NLin6Asym&#39;, resolution=1, suffix=&#39;T1w&#39;, desc=None, extension=&#39;nii.gz&#39;)))&quot;</span><span class="w"> </span><span class="k">)</span>
</code></pre></div>

<p>A pretty close behavior will be expected when operating in DataLad mode, although instead of getting
zero-sized files, you'll probably get a straight <em>file not found</em> error.</p>
<h2 id="documentation-for-developers">Documentation for developers<a class="headerlink" href="#documentation-for-developers" title="Permanent link">&para;</a></h2>
<p>The client is thought out to be integrated in higher-level neuroimaging workflows,
such as <a href="https://fmriprep.readthedocs.io" title="fMRIPrep"><em>fMRIPrep</em></a>, <a href="https://mriqc.readthedocs.io" title="MRIQC"><em>MRIQC</em></a>.
Further details about the usage of the tool are found in the <a href="https://templateflow.github.io/python-client" title="TemplateFlow Python client documentation">documentation</a>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020 - The NiPreps developers
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["tabs"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>